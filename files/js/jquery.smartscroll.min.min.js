!function(c){function f(a){a.find(".smartscroll-item").unwrap(),a.children(".smartscroll-item").sort(function(i,j){return +i.getAttribute("data-startposition")-+j.getAttribute("data-startposition")}).appendTo(a),a.css("height","auto"),a.removeClass("active"),a.removeClass("smartgenerated")}function d(j){var l=0,k=0,i=j.attr("data-offsettop"),m=j.attr("data-offsetbottom");i&&"false"!==i&&(l=i.indexOf("px")>=0?parseInt(i,10):jQuery(i).height()),m&&"false"!==m&&(k=m.indexOf("px")>=0?parseInt(m,10):jQuery(m).height()),j.data("topposition",j.offset().top-l),j.data("offsetval",l+k);var p=!1;j.children(".smart-col").each(function(){var a=jQuery(this);(!p||p>a.height())&&(p=a.height(),a.siblings(".smart-col").removeClass("lowestcol"),a.addClass("lowestcol"))}),1.1*(jQuery(window).height()-l+k)<p&&j.addClass("active").css("height",p+"px")}function b(){30===g&&jQuery(".smartscroll-container.active .smart-col").not(".lowestcol").each(function(){var j=jQuery(this),l=j.height(),k=j.parent(".smartscroll-container").height(),i=l-k;jQuery(document).scrollTop()+jQuery(window).height()>j.parent(".smartscroll-container").offset().top+j.parent(".smartscroll-container").height()&&TweenLite.to(j,0.3,{y:"-"+i})}),jQuery(".smartscroll-container.active.action .smart-col").not(".lowestcol").each(function(){var j=jQuery(this),l=j.height(),k=j.parent(".smartscroll-container").height(),i=l-k,m=k-jQuery(window).height()+parseInt(j.parent(".smartscroll-container").data("offsetval")),p=i/m;p=parseInt((jQuery(document).scrollTop()-parseInt(j.parent(".smartscroll-container").data("topposition")))*p),0>p&&(p=0),p>i&&(p=i),TweenLite.to(j,0.3,{y:"-"+p})}),jQuery(".smartscroll-container").each(function(){var a=jQuery(this).height()-jQuery(window).height()+parseInt(jQuery(this).data("offsetval"))+parseInt(jQuery(this).data("topposition"));jQuery(document).scrollTop()>jQuery(this).data("topposition")&&jQuery(document).scrollTop()<a?jQuery(this).addClass("action"):jQuery(this).removeClass("action")}),g+=1}c.fn.extend({smartscroll:function(j){var i={columns:2,offsettop:!1,offsetbottom:!1,breakpoint:770};return j=c.extend(i,j),this.each(function(){var e=jQuery(this);jQuery(this).width(),jQuery(this).height();j=c.extend(j,e.data()),e.addClass("smartscroll-container").css("overflow","hidden"),e.find(".smart-col").wrapInner("<div class='smart-col-inner'></div>"),e.attr("data-columns",j.columns),e.attr("data-offsettop",j.offsettop),e.attr("data-offsetbottom",j.offsetbottom),e.attr("data-breakpoint",j.breakpoint);var l=parseInt(j.breakpoint,10);if(j.columns&&e.children(".smartscroll-item").length>0&&e.children(".smart-col").length<1&&jQuery(window).width()>l){e.children(".smartscroll-item").each(function(a){jQuery(this).attr("data-startposition",a)});for(var m=1;m<=parseInt(j.columns,10);m++){var k=parseInt(j.columns,10)-m;e.children(".smartscroll-item:nth-child("+j.columns+"n-"+k+")").addClass("col-"+m)}for(var m=1;m<=parseInt(j.columns,10);m++){e.children(".smartscroll-item.col-"+m).wrapAll('<div class="smart-col"/>')}e.addClass("smartgenerated")}jQuery().unveil&&e.find("img.lazy").length>0&&e.find("img.lazy").unveil(300),jQuery(window).width()>l&&d(e)})}}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1000/60)}}(),function h(){jQuery(window).width()>768&&b(),requestAnimFrame(h)}();var g=0;jQuery(window).resize(function(){jQuery(".smartscroll-container").each(function(){var a=jQuery(this),e=parseInt(a.attr("data-breakpoint"),10);jQuery(window).width()<e&&a.hasClass("smartgenerated")?f(a):jQuery(window).width()>e&&!a.hasClass("smartgenerated")&&a.smartscroll()})}),jQuery(window).scroll(function(){jQuery(".smartscroll-container.active").each(function(){d(jQuery(this))})})}(jQuery);