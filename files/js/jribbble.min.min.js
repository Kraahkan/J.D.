!function(w,C,g,D){w.jribbble={};var k=null,j="https://api.dribbble.com/v1",p=["animated","attachments","debuts","playoffs","rebounds","teams"],B={token:"Jribbble: Missing Dribbble access token. Set one with $.jribbble.accessToken = YOUR_ACCESS_TOKEN. If you do not have an access token, you must register a new application at https://dribbble.com/account/applications/new",singular:function(a){return a.substr(0,a.length-1)},idRequired:function(a){return"Jribbble: You have to provide a "+this.singular(a)+' ID. ex: $.jribbble.%@("1234").'.replace(/%@/g,a)},subResource:function(a){return"Jribbble: You have to provide a "+this.singular(a)+' ID to get %@. ex: $.jribbble.%@("1234").%@()'.replace(/%@/g,a)},shotId:function(a){return"Jribbble: You have to provide a shot ID to get %@. ex: "+' $.jribbble.shots("1234").%@()'.replace(/%@/g,a)},commentLikes:'Jribbble: You have to provide a comment ID to get likes. ex:  $.jribbble.shots("1234").comments("456").likes()'},y=function(b,a){if(b&&"object"!=typeof b){return b}throw new Error(B.idRequired(a))},m=function(b){var a={};return b.forEach(function(c){a[c]=x.call(this,c)}.bind(this)),a},q=function(a){var b=w.param(a);return b?"?"+b:""},A=function(d){if(0!==d.length){var a=d[0],c=typeof a,b={};if("number"===c||"string"===c){var f=p.indexOf(a);f>-1?b.list=a:b.resource=a}else{"object"===c&&(b=a)}return b}},z=function(){var a=w.extend({},w.Deferred()),b=function(){return this.methods=[],this.response=null,this.flushed=!1,this.add=function(c){this.flushed?c(this.scope):this.methods.push(c)},this.flush=function(c){if(!this.flushed){for(this.scope=c,this.flushed=!0;this.methods[0];){this.methods.shift()(c)}return c}},this};return a.queue=new b,a.url=j,a.get=function(){return k?(w.ajax({type:"GET",url:this.url,beforeSend:function(c){c.setRequestHeader("Authorization","Bearer "+k)},success:function(c){this.resolve(c)}.bind(this),error:function(c){this.reject(c)}.bind(this)}),this):(console.error(B.token),!1)},a},v=function(a){return function(b){return w.extend(this,z()),this.queue.add(function(c){c.url+="/"+a+"/"+b}),setTimeout(function(){this.queue.flush(this).get()}.bind(this)),this}},x=function(a){return function(b){return this.queue.add(function(c){c.url+="/"+a+"/"+q(b||{})}),this}};w.jribbble.shots=function(b,d){var c=A([].slice.call(arguments))||{},f=d||{},e=function(h){return function(l,i){var u=A([].slice.call(arguments))||{},t=i||{};return this.queue.add(function(n){if(!n.shotId){throw new Error(B.shotId(h))}n.url+="/"+h+"/",u.resource&&(n.url+=u.resource,delete u.resource),n.url+=q(w.extend(u,t))}),this}},a=function(){return w.extend(this,z()),this.url+="/shots/",this.queue.add(function(h){c.resource&&(h.shotId=c.resource,h.url+=c.resource,delete c.resource),h.url+=q(w.extend(c,f))}),setTimeout(function(){this.queue.flush(this).get()}.bind(this)),this};return a.prototype.attachments=e("attachments"),a.prototype.buckets=e("buckets"),a.prototype.likes=e("likes"),a.prototype.projects=e("projects"),a.prototype.rebounds=e("rebounds"),a.prototype.comments=function(h,l){var i=A([].slice.call(arguments))||{},o=l||{};return this.queue.add(function(n){if(!n.shotId){throw new Error(B.shotId("comments"))}n.url+="/comments/",i.resource&&(n.commentId=i.resource,n.url+=i.resource+"/",delete i.resource),n.url+=q(w.extend(i,o))}),this.likes=function(r){var n=r||{};return this.queue.add(function(s){if(!s.commentId){throw new Error(B.commentLikes)}s.url+="likes/"+q(n)}),this},this},new a},w.jribbble.teams=function(d){var a="teams",c=y(d,a),b=v.call(this,a);return b.prototype=m.call(this,["members","shots"]),new b(c)},w.jribbble.users=function(d){var a="users",c=y(d,a),b=v.call(this,a);return b.prototype=m.call(this,["buckets","followers","following","likes","projects","shots","teams"]),b.prototype.isFollowing=function(f){return this.queue.add(function(e){e.url+="/following/"+f}),this},new b(c)},w.jribbble.buckets=function(d){var a="buckets",c=y(d,a),b=v.call(this,a);return b.prototype=m.call(this,["shots"]),new b(c)},w.jribbble.projects=function(d){var a="projects",c=y(d,a),b=v.call(this,a);return b.prototype=m.call(this,["shots"]),new b(c)},w.jribbble.setToken=function(a){return k=a,this}}(jQuery,window,document);