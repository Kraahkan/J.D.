(function(a){var b=jQuery.fn.revolution;jQuery.extend(true,b,{stopKenBurn:function(c){if(c.data("kbtl")!=undefined){c.data("kbtl").pause()}},startKenBurn:function(j,g,w){var v=j.data(),q=j.find(".defaultimg"),x=q.data("lazyload")||q.data("src"),r=v.owidth/v.oheight,p=g.sliderType==="carousel"?g.carousel.slide_width:g.ul.width(),f=g.ul.height(),h=p/f;if(j.data("kbtl")){j.data("kbtl").kill()}w=w||0;if(j.find(".tp-kbimg").length==0){j.append('<div class="tp-kbimg-wrap" style="z-index:2;width:100%;height:100%;top:0px;left:0px;position:absolute;"><img class="tp-kbimg" src="'+x+'" style="position:absolute;" width="'+v.owidth+'" height="'+v.oheight+'"></div>');j.data("kenburn",j.find(".tp-kbimg"))}var e=function(D,z,B,l,d,F,k){var A=D*B,i=z*B,y=Math.abs(l-A),C=Math.abs(d-i),E=new Object();E.l=(0-F)*y;E.r=E.l+A;E.t=(0-k)*C;E.b=E.t+i;E.h=F;E.v=k;return E},c=function(A,z,i,B,s){var k=A.bgposition.split(" ")||"center center",C=k[0]=="center"?"50%":k[0]=="left"||k[1]=="left"?"0%":k[0]=="right"||k[1]=="right"?"100%":k[0],l=k[1]=="center"?"50%":k[0]=="top"||k[1]=="top"?"0%":k[0]=="bottom"||k[1]=="bottom"?"100%":k[1];C=parseInt(C,0)/100||0;l=parseInt(l,0)/100||0;var y=new Object();y.start=e(s.start.width,s.start.height,s.start.scale,z,i,C,l);y.end=e(s.start.width,s.start.height,s.end.scale,z,i,C,l);return y},u=function(l,A,I){var G=I.scalestart/100,B=I.scaleend/100,F=I.oofsetstart!=undefined?I.offsetstart.split(" ")||[0,0]:[0,0],L=I.offsetend!=undefined?I.offsetend.split(" ")||[0,0]:[0,0];I.bgposition=I.bgposition=="center center"?"50% 50%":I.bgposition;var E=new Object(),D=l*G,K=D/I.owidth*I.oheight,H=l*B,s=H/I.owidth*I.oheight;E.start=new Object();E.starto=new Object();E.end=new Object();E.endo=new Object();E.start.width=l;E.start.height=E.start.width/I.owidth*I.oheight;if(E.start.height<A){var C=A/E.start.height;E.start.height=A;E.start.width=E.start.width*C}E.start.transformOrigin=I.bgposition;E.start.scale=G;E.end.scale=B;E.start.rotation=I.rotatestart+"deg";E.end.rotation=I.rotateend+"deg";var J=c(I,l,A,F,E);F[0]=parseFloat(F[0])+J.start.l;L[0]=parseFloat(L[0])+J.end.l;F[1]=parseFloat(F[1])+J.start.t;L[1]=parseFloat(L[1])+J.end.t;var k=J.start.r-J.start.l,i=J.start.b-J.start.t,z=J.end.r-J.end.l,y=J.end.b-J.end.t;F[0]=F[0]>0?0:k+F[0]<l?l-k:F[0];L[0]=L[0]>0?0:z+L[0]<l?l-z:L[0];F[1]=F[1]>0?0:i+F[1]<A?A-i:F[1];L[1]=L[1]>0?0:y+L[1]<A?A-y:L[1];E.starto.x=F[0]+"px";E.starto.y=F[1]+"px";E.endo.x=L[0]+"px";E.endo.y=L[1]+"px";E.end.ease=E.endo.ease=I.ease;E.end.force3D=E.endo.force3D=true;return E};if(j.data("kbtl")!=undefined){j.data("kbtl").kill();j.removeData("kbtl")}var o=j.data("kenburn"),t=o.parent(),n=u(p,f,v),m=new punchgs.TimelineLite();m.pause();n.start.transformOrigin="0% 0%";n.starto.transformOrigin="0% 0%";m.add(punchgs.TweenLite.fromTo(o,v.duration/1000,n.start,n.end),0);m.add(punchgs.TweenLite.fromTo(t,v.duration/1000,n.starto,n.endo),0);m.progress(w);m.play();j.data("kbtl",m)}})})(jQuery);