(function(d){var c=jQuery.fn.revolution;jQuery.extend(true,c,{prepareCarousel:function(k,j,l){l=k.carousel.lastdirection=a(l,k.carousel.lastdirection);b(k);k.carousel.slide_offset_target=g(k);if(j==undefined){c.carouselToEvalPosition(k,l)}else{e(k,l,false)}},carouselToEvalPosition:function(j,n){var q=j.carousel;n=q.lastdirection=a(n,q.lastdirection);var m=q.horizontal_align==="center"?((q.wrapwidth/2-q.slide_width/2)-q.slide_globaloffset)/q.slide_width:(0-q.slide_globaloffset)/q.slide_width,r=c.simp(m,j.slideamount,false);var p=r-Math.floor(r),k=0,o=-1*(Math.ceil(r)-r),l=-1*(Math.floor(r)-r);k=p>=0.3&&n==="left"||p>=0.7&&n==="right"?o:p<0.3&&n==="left"||p<0.7&&n==="right"?l:k;k=q.infinity==="off"?r<0?r:m>j.slideamount-1?m-(j.slideamount-1):k:k;q.slide_offset_target=k*q.slide_width;if(Math.abs(q.slide_offset_target)!==0){e(j,n,true)}else{c.organiseCarousel(j,n)}},organiseCarousel:function(j,t,k,l){t=t===undefined||t=="down"||t=="up"||t===null||jQuery.isEmptyObject(t)?"left":t;var v=j.carousel,o=new Array(),p=v.slides.length,u=v.horizontal_align==="right"?u=j.width:0;for(var m=0;m<p;m++){var s=(m*v.slide_width)+v.slide_offset;if(v.infinity==="on"){s=s>v.wrapwidth-v.inneroffset&&t=="right"?v.slide_offset-((v.slides.length-m)*v.slide_width):s;s=s<0-v.inneroffset-v.slide_width&&t=="left"?s+v.maxwidth:s}o[m]=s}var n=999;if(v.slides){jQuery.each(v.slides,function(z,y){var D=o[z];if(v.infinity==="on"){D=D>v.wrapwidth-v.inneroffset&&t==="left"?o[0]-((p-z)*v.slide_width):D;D=D<0-v.inneroffset-v.slide_width?t=="left"?D+v.maxwidth:t==="right"?o[p-1]+((z+1)*v.slide_width):D:D}var A=new Object();A.left=D+v.inneroffset;var B=v.horizontal_align==="center"?(Math.abs(v.wrapwidth/2)-(A.left+v.slide_width/2))/v.slide_width:(v.inneroffset-A.left)/v.slide_width,x=B<0?-1:1,w=v.horizontal_align==="center"?2:1;if((k&&Math.abs(B)<n)||B===0){n=Math.abs(B);v.focused=z}A.width=v.slide_width;A.x=0;A.transformPerspective=1200;A.transformOrigin="50% "+v.vertical_align;if(v.fadeout==="on"){if(v.vary_fade==="on"){A.autoAlpha=1-Math.abs(((1/Math.ceil(v.maxVisibleItems/w))*B))}else{switch(v.horizontal_align){case"center":A.autoAlpha=Math.abs(B)<Math.ceil((v.maxVisibleItems/w)-1)?1:1-(Math.abs(B)-Math.floor(Math.abs(B)));break;case"left":A.autoAlpha=B<1&&B>0?1-B:Math.abs(B)>v.maxVisibleItems-1?1-(Math.abs(B)-(v.maxVisibleItems-1)):1;break;case"right":A.autoAlpha=B>-1&&B<0?1-Math.abs(B):B>v.maxVisibleItems-1?1-(Math.abs(B)-(v.maxVisibleItems-1)):1;break}}}else{A.autoAlpha=Math.abs(B)<Math.ceil((v.maxVisibleItems/w))?1:0}if(v.minScale!==undefined&&v.minScale>0){if(v.vary_scale==="on"){A.scale=1-Math.abs(((v.minScale/100/Math.ceil(v.maxVisibleItems/w))*B));var C=(v.slide_width-(v.slide_width*A.scale))*Math.abs(B)}else{A.scale=B>=1||B<=-1?1-v.minScale/100:(100-(v.minScale*Math.abs(B)))/100;var C=(v.slide_width-(v.slide_width*(1-v.minScale/100)))*Math.abs(B)}}if(v.maxRotation!==undefined&&Math.abs(v.maxRotation)!=0){if(v.vary_rotation==="on"){A.rotationY=Math.abs(v.maxRotation)-Math.abs((1-Math.abs(((1/Math.ceil(v.maxVisibleItems/w))*B)))*v.maxRotation);A.autoAlpha=Math.abs(A.rotationY)>90?0:A.autoAlpha}else{A.rotationY=B>=1||B<=-1?v.maxRotation:Math.abs(B)*v.maxRotation}A.rotationY=B<0?A.rotationY*-1:A.rotationY}A.x=(-1*v.space)*B;A.left=Math.floor(A.left);A.x=Math.floor(A.x);A.scale!==undefined?B<0?A.x-C:A.x+C:A.x;A.zIndex=Math.round(100-Math.abs(B*5));A.transformStyle=j.parallax.type!="3D"&&j.parallax.type!="3d"?"flat":"preserve-3d";punchgs.TweenLite.set(y,A)})}if(l){j.c.find(".next-revslide").removeClass("next-revslide");jQuery(v.slides[v.focused]).addClass("next-revslide");j.c.trigger("revolution.nextslide.waiting")}var r=v.wrapwidth/2-v.slide_offset,q=v.maxwidth+v.slide_offset-v.wrapwidth/2}});var f=function(k){var j=k.carousel;j.infbackup=j.infinity;j.maxVisiblebackup=j.maxVisibleItems;j.slide_globaloffset="none";j.slide_offset=0;j.wrap=k.c.find(".tp-carousel-wrapper");j.slides=k.c.find(".tp-revslider-slidesli");if(j.maxRotation!==0){if(k.parallax.type!="3D"&&k.parallax.type!="3d"){punchgs.TweenLite.set(j.wrap,{perspective:1200,transformStyle:"flat"})}else{punchgs.TweenLite.set(j.wrap,{perspective:1600,transformStyle:"preserve-3d"})}}if(j.border_radius!==undefined&&parseInt(j.border_radius,0)>0){punchgs.TweenLite.set(k.c.find(".tp-revslider-slidesli"),{borderRadius:j.border_radius})}};var b=function(l){if(l.bw===undefined){c.setSize(l)}var j=l.carousel,k=c.getHorizontalOffset(l.c,"left"),n=c.getHorizontalOffset(l.c,"right");if(j.wrap===undefined){f(l)}j.slide_width=j.stretch!=="on"?l.gridwidth[l.curWinRange]*l.bw:l.c.width();j.maxwidth=l.slideamount*j.slide_width;if(j.maxVisiblebackup>j.slides.length+1){j.maxVisibleItems=j.slides.length+2}j.wrapwidth=(j.maxVisibleItems*j.slide_width)+((j.maxVisibleItems-1)*j.space);j.wrapwidth=l.sliderLayout!="auto"?j.wrapwidth>l.c.closest(".tp-simpleresponsive").width()?l.c.closest(".tp-simpleresponsive").width():j.wrapwidth:j.wrapwidth>l.ul.width()?l.ul.width():j.wrapwidth;j.infinity=j.wrapwidth>=j.maxwidth?"off":j.infbackup;j.wrapoffset=j.horizontal_align==="center"?(l.c.width()-n-k-j.wrapwidth)/2:0;j.wrapoffset=l.sliderLayout!="auto"&&l.outernav?0:j.wrapoffset<k?k:j.wrapoffset;var m="hidden";if((l.parallax.type=="3D"||l.parallax.type=="3d")){m="visible"}if(j.horizontal_align==="right"){punchgs.TweenLite.set(j.wrap,{left:"auto",right:j.wrapoffset+"px",width:j.wrapwidth,overflow:m})}else{punchgs.TweenLite.set(j.wrap,{right:"auto",left:j.wrapoffset+"px",width:j.wrapwidth,overflow:m})}j.inneroffset=j.horizontal_align==="right"?j.wrapwidth-j.slide_width:0;j.realoffset=(Math.abs(j.wrap.position().left));j.windhalf=jQuery(window).width()/2};var a=function(k,j){return k===null||jQuery.isEmptyObject(k)?j:k===undefined?"right":k};var e=function(l,n,m){var j=l.carousel;n=j.lastdirection=a(n,j.lastdirection);var k=new Object();k.from=0;k.to=j.slide_offset_target;if(j.positionanim!==undefined){j.positionanim.pause()}j.positionanim=punchgs.TweenLite.to(k,1.2,{from:k.to,onUpdate:function(){j.slide_offset=j.slide_globaloffset+k.from;j.slide_offset=c.simp(j.slide_offset,j.maxwidth);c.organiseCarousel(l,n,false,false)},onComplete:function(){j.slide_globaloffset=j.infinity==="off"?j.slide_globaloffset+j.slide_offset_target:c.simp(j.slide_globaloffset+j.slide_offset_target,j.maxwidth);j.slide_offset=c.simp(j.slide_offset,j.maxwidth);c.organiseCarousel(l,n,false,true);var o=jQuery(l.li[j.focused]);l.c.find(".next-revslide").removeClass("next-revslide");if(m){c.callingNewSlide(l,l.c,o.data("index"))}},ease:punchgs.Expo.easeOut})};var h=function(k,j){return Math.abs(k)>Math.abs(j)?k>0?k-Math.abs(Math.floor(k/(j))*(j)):k+Math.abs(Math.floor(k/(j))*(j)):k};var i=function(l,k,j){var n=k-l,j,m=(k-j)-l,j;n=h(n,j);m=h(m,j);return Math.abs(n)>Math.abs(m)?m:n};var g=function(m){var k=0,j=m.carousel;if(j.positionanim!==undefined){j.positionanim.kill()}if(j.slide_globaloffset=="none"){j.slide_globaloffset=k=j.horizontal_align==="center"?(j.wrapwidth/2-j.slide_width/2):0}else{j.slide_globaloffset=j.slide_offset;j.slide_offset=0;var l=m.c.find(".processing-revslide").index(),n=j.horizontal_align==="center"?((j.wrapwidth/2-j.slide_width/2)-j.slide_globaloffset)/j.slide_width:(0-j.slide_globaloffset)/j.slide_width;n=c.simp(n,m.slideamount,false);l=l>=0?l:m.c.find(".active-revslide").index();l=l>=0?l:0;k=j.infinity==="off"?n-l:-i(n,l,m.slideamount);k=k*j.slide_width}return k}})(jQuery);